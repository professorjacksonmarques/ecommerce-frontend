<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Login</title>
</head>
<body>
  <h1>Login</h1>
  <form id="login-form">
  <input id="username" name="username" placeholder="UsuÃ¡rio" required />
  <input id="password" name="password" type="password" placeholder="Senha" required />
  <button type="submit">Entrar</button>
</form>

<div id="msg"></div>

<script>
const API = 'https://ecommerce-backend-us6o.onrender.com';

document.getElementById('login-form').addEventListener('submit', async (e) => {
  e.preventDefault(); // evita submit tradicional (que envia form-url-encoded)

  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value;

  const res = await fetch(`${API}/api/login`, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({ username, password })
  });

  const data = await res.json();
  const msg = document.getElementById('msg');

  if (res.ok) {
    msg.textContent = data.message || 'Login successful';
    // exemplo: salvar token no futuro -> localStorage.setItem('token', data.token)
    // location.href = 'admin.html';
  } else {
    msg.textContent = data.message || 'Invalid credentials';
  }
});
</script>
</body>
</html>
